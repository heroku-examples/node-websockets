"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getVarIntArray = void 0;
var integer_1 = require("./integer");
/**
 * Decode PoolIntArray
 * @param genericDecoder
 * @param buf {Buffer}
 * @param flag
 * @returns {{value: Array, length: Number}}
 */
function getVarIntArray(genericDecoder, buf, flag) {
    var nbEntries = buf.readUInt32LE(0);
    // start at 4 cause of nbEntries
    var data = {
        array: [],
        buffer: buf.slice(4),
        pos: 4
    };
    for (var index = 0; index < nbEntries; index++) {
        var decodedValue = (0, integer_1.getVarInteger)(genericDecoder, data.buffer, flag);
        data.array.push(decodedValue.value);
        data.buffer = data.buffer.slice(decodedValue.length);
        data.pos += decodedValue.length;
    }
    return {
        value: data.array,
        length: data.pos
    };
}
exports.getVarIntArray = getVarIntArray;
